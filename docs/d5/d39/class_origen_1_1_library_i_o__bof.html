<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.10"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>ORIGEN API: LibraryIO_bof Class Reference</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../../doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">ORIGEN API v0.5.2</a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Overview</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../modules.html"><span>Components</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../d1/d5b/md__c_h_a_n_g_e_l_o_g.html"><span>Changelog</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d5/dc1/namespace_origen.html">Origen</a></li><li class="navelem"><a class="el" href="../../d5/d39/class_origen_1_1_library_i_o__bof.html">LibraryIO_bof</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../db/da3/class_origen_1_1_library_i_o__bof-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LibraryIO_bof Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;LibraryIO_bof.h&gt;</code></p>
<div class="dynheader">
Inheritance diagram for LibraryIO_bof:</div>
<div class="dyncontent">
 <div class="center">
  <img src="../../d5/d39/class_origen_1_1_library_i_o__bof.png" usemap="#LibraryIO_bof_map" alt=""/>
  <map id="LibraryIO_bof_map" name="LibraryIO_bof_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a325ef1c910c64d441454de48a9dec0dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d39/class_origen_1_1_library_i_o__bof.html#a325ef1c910c64d441454de48a9dec0dc">read</a> (<a class="el" href="../../de/d87/class_origen_1_1_library.html">Library</a> &amp;obj, std::istream &amp;stream, ScaleUtils::IO::DB opts)</td></tr>
<tr class="memdesc:a325ef1c910c64d441454de48a9dec0dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">The read function opens the <a class="el" href="../../d5/dc1/namespace_origen.html">Origen</a> library file on the disk and pulls all of the data off and converts it from the BOF data format into the appropriate format for the library object and creates that library object. This is done for both the burn-up dependent and independent data.  <a href="#a325ef1c910c64d441454de48a9dec0dc">More...</a><br /></td></tr>
<tr class="separator:a325ef1c910c64d441454de48a9dec0dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad141651156345d8b46c60f326d939944"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d39/class_origen_1_1_library_i_o__bof.html#ad141651156345d8b46c60f326d939944">write</a> (const <a class="el" href="../../de/d87/class_origen_1_1_library.html">Library</a> &amp;obj, std::ostream &amp;stream, ScaleUtils::IO::DB opts)</td></tr>
<tr class="memdesc:ad141651156345d8b46c60f326d939944"><td class="mdescLeft">&#160;</td><td class="mdescRight">The write function opens the objects on an <a class="el" href="../../d5/dc1/namespace_origen.html">Origen</a> library and puts them into the appropriate BOF data type and adds them to the library object. Once all of the parts are added, the object is written to the file. The burnup steps are written as a separate object from the rest.  <a href="#ad141651156345d8b46c60f326d939944">More...</a><br /></td></tr>
<tr class="separator:ad141651156345d8b46c60f326d939944"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a325ef1c910c64d441454de48a9dec0dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/class_origen_1_1_library.html">Library</a> &amp;&#160;</td>
          <td class="paramname"><em>lib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ScaleUtils::IO::DB&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The read function opens the <a class="el" href="../../d5/dc1/namespace_origen.html">Origen</a> library file on the disk and pulls all of the data off and converts it from the BOF data format into the appropriate format for the library object and creates that library object. This is done for both the burn-up dependent and independent data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lib</td><td>- Reference to the library object into which the data will be loaded. </td></tr>
    <tr><td class="paramname">stream</td><td>- Output stream. </td></tr>
    <tr><td class="paramname">opts</td><td>- Object into which errors and information about the library is stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool - True if read was successful. False otherwise.</dd></dl>
<p>All data tags are the same as the write function. </p>

<p>References <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#ad3cc8c55d529da390fa0ce9d2978f1d9">DecayData::abund_of_lite_nuclides</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#ad172725411e4b18de4e8c3789da7eb44">Library::add_transition_coeff()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#aef01025e80ab7a47a4219802be0c7f6f">TransitionCoeff::burnup()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#aa60ce09301066a3c124dc5aef66eec8b">DecayData::decay_constants</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#af4b91a60ef4162a5afb3806b0b69ccc1">DecayData::fissionable_nuclide_ids</a>, <a class="el" href="../../d5/dc1/namespace_origen.html#ab5fd7f39fd11aa2864290521a9103e17">Origen::get_default_kappas()</a>, <a class="el" href="../../d2/de0/class_origen_1_1_nuclide_set.html#a889dc0300ad2c9cc1f40884d2e61ac25">NuclideSet::ids()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a1a1083188a6a73c54e408d7fe9535a52">DecayData::masses</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#a30d45658bf2bd71aa3f45267469d959e">LibraryHeader::nuclide_set()</a>, <a class="el" href="../../d5/dc1/namespace_origen.html#a0b61efe686462d7b59b3f148c535b5fc">Origen::populateLibraryAbundance()</a>, <a class="el" href="../../d5/dc1/namespace_origen.html#afa62678e878b5cce0839fe0b0a3aa66b">Origen::populateLibraryMass()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a20e19690b5a5d8554ffcdd06e2165354">DecayData::q_fractions_from_photons</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#aee092acdc05801ba44688204731f6e60">DecayData::rcg_for_air</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a6f4208700c8580edfddf80045fee35d3">DecayData::rcg_for_water</a>, <a class="el" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">Origen::read()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a8af2124dfdc5be17e6159171f5c3318e">DecayData::recoverable_energy_values</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#a4e3a0392b52a9261206f641904e18bb2">TransitionCoeff::set_burnup()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#a81b57de8c54702bde489aac54d154cfa">LibraryHeader::set_day_made()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#a50dc9f2e93e4c16ccd759c44fbef2b46">Library::set_decay_data()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#abade2f9325eef118478da4e9522b80c1">Library::set_definition()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#af300db0979b9db127da3964d74b848dc">TransitionCoeff::set_fission_xs()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#ac4958277744eb12452ecc1249f4e15a6">TransitionCoeff::set_flux()</a>, <a class="el" href="../../d2/de0/class_origen_1_1_nuclide_set.html#ad1596b8009f8903a70ac90a9059031f3">NuclideSet::set_ids()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#a75c5ca93bae26be1febdf9157e412bb4">TransitionCoeff::set_kappa_capture()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#a455437166fa0a226b7c34236455c679e">TransitionCoeff::set_kappa_fission()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#a95b33ff058085fab63f2c47288243f03">TransitionCoeff::set_loss_xs()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#aa4ae601b99f6e604339d1ed0db910b6a">TransitionCoeff::set_matrix()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#aedf4315c991cea533f1eee3149136c1c">LibraryHeader::set_month_made()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#a824b13bd5e74416e1941246e5b96f351">TransitionCoeff::set_neutron_yields()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#ac106f978716fdd0ff70e88741e894ccd">LibraryHeader::set_nuclide_set()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#a67d3aee122fa6c25c3f094b2f340399e">TransitionStructure::set_num_decay_parents()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#a294fd787fdd73458339f89cdaca63043">TransitionStructure::set_num_parents()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#a988f83c0c2d3c6d47f8f50ec18878aca">TransitionStructure::set_parent_positions()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#a883803bed52a0bae14270eb5dc12f809">Library::set_tag_manager()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#afae5e006b41514ceea2a9d6448c929f3">LibraryHeader::set_title()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#abf9ec663e49c3354da9870607bcc75b3">TransitionStructure::set_transition_ids()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#a7a2053928cd4fdca72cf27f754191531">Library::set_transition_structure()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#a7450231594d270d21eba7c52f98d112b">LibraryHeader::set_year_made()</a>, and <a class="el" href="../../d5/dc1/namespace_origen.html#ad0700ff0903a6abe668ead823b2f9fed">Origen::version()</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="comment">// Insist we can read from this istream</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">if</span>( !stream.good() )</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        opts.appendError( <span class="stringliteral">&quot;Failed to open stream for reading.&quot;</span> );</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    nemesis::Timer t;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    t.start();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// buffers</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="../../d4/d05/namespace_vec___int.html">Vec_Int</a> ivec;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="../../de/d1d/namespace_vec___flt.html">Vec_Flt</a> fvec;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// BOFF reader for disk to memory communications</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    std::stringstream errmsg;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">try</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment">// If we don&#39;t give the BOFReader the errmsg, it writes to std::cerr,</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="comment">// which muddies up the output.</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        bof::BOFReader reader( stream, errmsg );</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <span class="keywordflow">if</span>( !reader.loadHeader() )</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            opts.appendError( <span class="stringliteral">&quot;file is either corrupt or not BOF format&quot;</span> );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordtype">bool</span> check1 =</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            opts.checkAppName( <span class="stringliteral">&quot;ORIGEN_F33&quot;</span>, reader.getAppName().c_str() );</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span>( !check1 )</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            <span class="comment">// second chance</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;            <span class="keywordtype">bool</span> check2 =</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                opts.checkAppName( <span class="stringliteral">&quot;ORIGENBL  &quot;</span>, reader.getAppName().c_str() );</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">if</span>( check2 )</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                opts.clearErrorStack();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="comment">// set up version</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordtype">int</span> appMajor = reader.getAppMajor();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        <span class="keywordtype">int</span> appMinor = reader.getAppMinor();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordtype">int</span> appMicro = reader.getAppMicro();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        opts.set( <span class="stringliteral">&quot;readAppMajor&quot;</span>, appMajor );</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        opts.set( <span class="stringliteral">&quot;readAppMinor&quot;</span>, appMinor );</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        opts.set( <span class="stringliteral">&quot;readAppMicro&quot;</span>, appMicro );</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        Version <a class="code" href="../../d5/dc1/namespace_origen.html#ad0700ff0903a6abe668ead823b2f9fed">version</a>( appMajor, appMinor, appMicro );</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        opts.set( <span class="stringliteral">&quot;readAppVersion&quot;</span>, <a class="code" href="../../d5/dc1/namespace_origen.html#ad0700ff0903a6abe668ead823b2f9fed">version</a>.asString() );</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="comment">// This file was not written by SCALE if all these are 0.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="comment">// This must be in some other system, e.g. a unit test of someone using</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">// the ORIGEN API, so we don&#39;t enforce the versioning.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">if</span>( !( appMajor == 0 &amp;&amp; appMinor == 0 &amp;&amp; appMicro == 0 ) )</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;            <span class="keywordtype">bool</span> check2 =</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                opts.checkAppVersion( <a class="code" href="../../d5/dc1/namespace_origen.html#ad0700ff0903a6abe668ead823b2f9fed">version</a>, Version( <span class="stringliteral">&quot;6.2.pre-b1&quot;</span> ) );</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            <span class="keywordflow">if</span>( !check2 ) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="comment">// BOF Object type and byte count for use during reading</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        bof::BOFType objType;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        <span class="keywordtype">size_t</span> objByteCount;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="comment">// expect the case object</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">if</span>( !reader.nextType( objType, objByteCount ) )</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            std::stringstream ss;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            ss &lt;&lt; <span class="stringliteral">&quot; failed to acquire the Library BOFF object type and byte &quot;</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                  <span class="stringliteral">&quot;count! &quot;</span>;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">throw</span> std::istream::failure( errmsg.str() + ss.str() );</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        bof::BOFObject obj;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">if</span>( !reader.read( objByteCount, obj ) )</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">throw</span> std::istream::failure(</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                <span class="stringliteral">&quot;Failed to read Library BOFF object data!&quot;</span> );</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="comment">// add file endianness</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        opts.set( <span class="stringliteral">&quot;readFileEndian&quot;</span>,</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                  ScaleUtils::IO::EndianUtils::file_is_big_endian(</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                      reader.isNativeEndian() )</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                      ? <span class="stringliteral">&quot;big&quot;</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                      : <span class="stringliteral">&quot;little&quot;</span> );</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="comment">// LibraryHeader</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        LibraryHeader header;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">// add ids</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            NuclideSet nucset;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;nid&quot;</span>, ivec );</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            nucset.set_ids( ivec );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            header.set_nuclide_set( nucset );</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="comment">// header title</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            std::string str;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;ttl&quot;</span>, str );</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            header.set_title( str );</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="comment">// add other parameters</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;ntc&quot;</span>, i );</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;mon&quot;</span>, i );</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            header.set_month_made( i );</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;day&quot;</span>, i );</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;            header.set_day_made( i );</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;yrm&quot;</span>, i );</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;            header.set_year_made( i );</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;nne&quot;</span>, i );</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;nfn&quot;</span>, i );</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="comment">//::IO::Accessor&lt; ::Origen::LibraryHeader&gt;::read(obj,header);</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        lib.set_definition( header );</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="comment">// TagManager</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">if</span>( obj.contains&lt;bof::BOFObject&gt;( <span class="stringliteral">&quot;TagManager&quot;</span> ) )</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            TagManager tag_manager;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::Origen::read</a>( obj, <span class="stringliteral">&quot;TagManager&quot;</span>, tag_manager );</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            lib.set_tag_manager( tag_manager );</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        DecayData decay_data;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="comment">// Switch over to nuclide data</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <span class="comment">// Record #5 NFISO and nuclides ids of fissionable nuclides</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <span class="comment">// DecayData</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;fni&quot;</span>, decay_data.fissionable_nuclide_ids );</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="comment">// Record #6 itot, KD  num decay parents</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="comment">// TransitionStructureData</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        TransitionStructure tstruct;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;nnp&quot;</span>, ivec );</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        tstruct.set_num_decay_parents( ivec );</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// Record #7 itot, NON0 (all parents #)</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="comment">// TransitionStructureData</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;tpn&quot;</span>, ivec );</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        tstruct.set_num_parents( ivec );</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// Record #8 NON, LOC (A tstruct parent points)</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="comment">// TransitionStructureData</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;ppl&quot;</span>, ivec );</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        tstruct.set_parent_positions( ivec );</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="comment">// Record #9 NON, MT (a tstruct reaction identifiers)</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="comment">// TransitionStructureData</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;mtl&quot;</span>, ivec );</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        tstruct.set_transition_ids( ivec );</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        lib.set_transition_structure( tstruct );</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="comment">// Record #10 ITOT, DIS decay constants</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="comment">// DecayData</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;dcc&quot;</span>, decay_data.decay_constants );</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="comment">// Record #11 ITOT, Q (recov. energy)</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="comment">// DecayData</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;rev&quot;</span>, decay_data.recoverable_energy_values );</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="comment">// Record #12 ITOT, FG (Q fractions due to photons)</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="comment">// DecayData</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;qfp&quot;</span>, decay_data.q_fractions_from_photons );</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="comment">// Record #13 ITOT, RCG-air</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="comment">// DecayData</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;rfa&quot;</span>, decay_data.rcg_for_air );</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="comment">// Record #14 ITOT, RCG-water</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="comment">// DecayData</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;rfw&quot;</span>, decay_data.rcg_for_water );</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="comment">// Record #15 ILITE ABUND (abundances)</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;aap&quot;</span>, decay_data.abund_of_lite_nuclides );</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="comment">// Get the ids as SIZZZAA.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d4/d05/namespace_vec___int.html">Vec_Int</a>&amp; ids = header.nuclide_set().ids();</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="comment">// NEW Record ITOT, MASSES initialize masses to A (g/mol)</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( obj, <span class="stringliteral">&quot;mas&quot;</span>, decay_data.masses );</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="comment">// done reading decay data</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        lib.set_decay_data( decay_data );</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <span class="comment">// Resource to load kappa-capture/kappa-fission data</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <a class="code" href="../../de/d1d/namespace_vec___flt.html">Vec_Flt</a> ref_kappa_capture;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="../../de/d1d/namespace_vec___flt.html">Vec_Flt</a> ref_kappa_fission;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#ab5fd7f39fd11aa2864290521a9103e17">get_default_kappas</a>( ids, ref_kappa_capture, ref_kappa_fission );</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="comment">// Get base coefficients with fixed kappas</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        TransitionCoeff tcoeff_base;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        tcoeff_base.set_kappa_capture( ref_kappa_capture );</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        tcoeff_base.set_kappa_fission( ref_kappa_fission );</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        jDebugLine( <span class="stringliteral">&quot;Starting to read burnups...&quot;</span> );</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment">// Start reading burnups</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="comment">// for each burnup</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0;; i++ )</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        {</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;            <span class="comment">// Peek ahead to ensure not at eof</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            stream.peek();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            <span class="keywordflow">if</span>( stream.good() == false ) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            <span class="comment">// expect the burnup object</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            <span class="keywordflow">if</span>( !reader.nextType( objType, objByteCount ) )</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;            {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                std::stringstream ss;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                ss &lt;&lt; <span class="stringliteral">&quot; failed to acquire the Library burnup object type and &quot;</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                      <span class="stringliteral">&quot;byte count! &quot;</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="keywordflow">throw</span> std::istream::failure( errmsg.str() + ss.str() );</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            jDebugTaggedLine( <span class="stringliteral">&quot;Extracting burnup &quot;</span> &lt;&lt; i</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                                   &lt;&lt; <span class="stringliteral">&quot; with bof object type &quot;</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                                   &lt;&lt; ( objType + 0 )</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                                   &lt;&lt; <span class="stringliteral">&quot; and byte count &quot;</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                                                   &lt;&lt; objByteCount );</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            bof::BOFObject bob;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;            <span class="keywordflow">if</span>( !reader.read( objByteCount, bob ) )</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            {</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="keywordflow">throw</span> std::istream::failure(</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                    <span class="stringliteral">&quot;Failed to read Library burnup data!&quot;</span> );</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            }</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;            <span class="comment">// Create a new burnup data object</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            TransitionCoeff tcoeff( tcoeff_base );</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            <span class="comment">// Read burnup</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="comment">// #1</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordtype">float</span> bu;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( bob, <span class="stringliteral">&quot;bu&quot;</span>, bu );</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            tcoeff.set_burnup( bu );</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            jDebugLine( <span class="stringliteral">&quot;\tburnup: &quot;</span> &lt;&lt; tcoeff.burnup() );</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;            <span class="comment">// Read A tstruct</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="comment">// #2</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( bob, <span class="stringliteral">&quot;ma&quot;</span>, fvec );</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            tcoeff.set_matrix( fvec );</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="comment">// Read capture xs TOCAP</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            <span class="comment">// #3</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( bob, <span class="stringliteral">&quot;tr&quot;</span>, fvec );</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            tcoeff.set_loss_xs( fvec );</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="comment">// Read fission xs FISS</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;            <span class="comment">// #4</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( bob, <span class="stringliteral">&quot;fx&quot;</span>, fvec );</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            tcoeff.set_fission_xs( fvec );</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="comment">// Read neutron yields GENNEU</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            <span class="comment">// #5</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( bob, <span class="stringliteral">&quot;ny&quot;</span>, fvec );</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            tcoeff.set_neutron_yields( fvec );</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="comment">// Read spectrum used to generate the library FLUX</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;            <span class="comment">// #6</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">::bof::read</a>( bob, <span class="stringliteral">&quot;fl&quot;</span>, fvec );</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            tcoeff.set_flux( fvec );</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            jDebugLine( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <span class="comment">// Save this burnup step</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            lib.add_transition_coeff( tcoeff );</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        }  <span class="comment">// loop over burnups</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        <span class="comment">// NEW Record ITOT, MASSES initialize masses to A (g/mol) or actual</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#afa62678e878b5cce0839fe0b0a3aa66b">populateLibraryMass</a>( &amp;lib, opts );</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#a0b61efe686462d7b59b3f148c535b5fc">populateLibraryAbundance</a>( &amp;lib, opts );</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">catch</span>( std::ios_base::failure&amp; e )</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        opts.appendError( e.what() );</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    t.stop();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    opts.set( <span class="stringliteral">&quot;loadTime&quot;</span>, 1000 * t.wall_clock() );</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div>
<div class="ttc" id="namespace_vec___flt_html"><div class="ttname"><a href="../../de/d1d/namespace_vec___flt.html">Vec_Flt</a></div></div>
<div class="ttc" id="namespace_origen_html_ad9dbf183ba4f551eeab50e180dce7f18"><div class="ttname"><a href="../../d5/dc1/namespace_origen.html#ad9dbf183ba4f551eeab50e180dce7f18">Origen::read</a></div><div class="ttdeci">void read(const bof::BOFObject &amp;obj, TagManager &amp;tag_manager)</div><div class="ttdoc">read a tag manager from a bof object </div><div class="ttdef"><b>Definition:</b> bof.cpp:6</div></div>
<div class="ttc" id="namespace_origen_html_ab5fd7f39fd11aa2864290521a9103e17"><div class="ttname"><a href="../../d5/dc1/namespace_origen.html#ab5fd7f39fd11aa2864290521a9103e17">Origen::get_default_kappas</a></div><div class="ttdeci">void get_default_kappas(const std::vector&lt; int &gt; &amp;sizzzaaa_list, std::vector&lt; float &gt; &amp;kappa_capture, std::vector&lt; float &gt; &amp;kappa_fission)</div><div class="ttdef"><b>Definition:</b> EnergyResource.cpp:115</div></div>
<div class="ttc" id="namespace_origen_html_afa62678e878b5cce0839fe0b0a3aa66b"><div class="ttname"><a href="../../d5/dc1/namespace_origen.html#afa62678e878b5cce0839fe0b0a3aa66b">Origen::populateLibraryMass</a></div><div class="ttdeci">void populateLibraryMass(Library *lib, const ScaleUtils::IO::DB &amp;opts)</div><div class="ttdef"><b>Definition:</b> populate.cpp:819</div></div>
<div class="ttc" id="namespace_vec___int_html"><div class="ttname"><a href="../../d4/d05/namespace_vec___int.html">Vec_Int</a></div></div>
<div class="ttc" id="namespace_origen_html_a0b61efe686462d7b59b3f148c535b5fc"><div class="ttname"><a href="../../d5/dc1/namespace_origen.html#a0b61efe686462d7b59b3f148c535b5fc">Origen::populateLibraryAbundance</a></div><div class="ttdeci">void populateLibraryAbundance(Library *lib, const ScaleUtils::IO::DB &amp;opts)</div><div class="ttdoc">populate a library with abundances from a nuclide resource </div><div class="ttdef"><b>Definition:</b> populate.cpp:309</div></div>
<div class="ttc" id="namespace_origen_html_ad0700ff0903a6abe668ead823b2f9fed"><div class="ttname"><a href="../../d5/dc1/namespace_origen.html#ad0700ff0903a6abe668ead823b2f9fed">Origen::version</a></div><div class="ttdeci">const char * version()</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad141651156345d8b46c60f326d939944"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool write </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_origen_1_1_library.html">Library</a> &amp;&#160;</td>
          <td class="paramname"><em>lib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ScaleUtils::IO::DB&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The write function opens the objects on an <a class="el" href="../../d5/dc1/namespace_origen.html">Origen</a> library and puts them into the appropriate BOF data type and adds them to the library object. Once all of the parts are added, the object is written to the file. The burnup steps are written as a separate object from the rest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lib</td><td>- A reference to the library object to be written. </td></tr>
    <tr><td class="paramname">stream</td><td>- Output stream. </td></tr>
    <tr><td class="paramname">opts</td><td>- A central point for errors and information about the file and operations in this function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- True if successful write. False otherwise.</dd></dl>
<p>Burnup Independent Data:</p>
<p>Record 1 -<br />
 "tnu" - [int] Total number of nuclides.<br />
 "nle" - [int] Number of light nuclides.<br />
 "nan" - [int] Number of actinide nuclides.<br />
 "nfp" - [int] Number of fission product nuclides.<br />
 "ntc" - [int] Total number of transitions.<br />
 "mon" - [int] Month that the library was made.<br />
 "day" - [int] Day that the library was made.<br />
 "yrm" - [int] Year that the library was made.<br />
 "nne" - [int] Number of neutron energy groups.<br />
 "nfn" - [int] Number of fissionable nuclides.</p>
<p>Record 2 -<br />
 "ttl" - [string] Title as found on the library header.</p>
<p>Record 3 -<br />
 "nid" - [array[int]] List of nuclide IDs.</p>
<p>Record 4 -<br />
 "TagManager" "idn" - [array[string]] List of ID tag names.<br />
 "idv" - [array[string]] List of ID tag values.<br />
 "itn" - [array[string]] List of interpolatable tag names.<br />
 "itv" - [array[double]] List of interpolatable tag values.</p>
<p>Record 5 -<br />
 "fni" - [array[int]] List of fissionable nuclides.</p>
<p>Record 6 -<br />
 "nnp" - [array[int]] List of decay parent nuclides.</p>
<p>Record 7 -<br />
 "tpn" - [array[int]] Complete list of parent nuclides.</p>
<p>Record 8 -<br />
 "ppl" - [array[int]] Location of parents, tstruct of parent positions.</p>
<p>Record 9 -<br />
 "mtl" - [array[int]]</p>
<p>Record 10 -<br />
 "dcc" - [array[float]] List of decay constants.</p>
<p>Record 11 -<br />
 "rev" - [array[float]] List of recoverable energies.</p>
<p>Record 12 -<br />
 "qfp" - [array[float]]</p>
<p>Record 13 -<br />
 "rfa" - [array[float]] RCG for air.</p>
<p>Record 14 -<br />
 "rfw" - [array[float]] RCG for water.</p>
<p>Record 15 -<br />
 "aap" - [array[float]] Abundances.<br />
<br />
<br />
</p>
<p>Burnup Dependent Data:</p>
<p>Record 1 -<br />
 "bu" - [float] Burnup.</p>
<p>Record 2 -<br />
 "ma" - [array[float]] tstruct transitions.</p>
<p>Record 3 -<br />
 "tr" - [array[float]] Total capture cross sections.</p>
<p>Record 4 -<br />
 "fx" - [array[float]] Fission cross sections.</p>
<p>Record 5 -<br />
 "ny" - [array[float]] <a class="el" href="../../dc/d9e/class_origen_1_1_neutron.html">Neutron</a> yields.</p>
<p>Record 6 -<br />
 "fl" - [array[float]] Flux spectrum used to generate the library. </p>

<p>References <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#ad3cc8c55d529da390fa0ce9d2978f1d9">DecayData::abund_of_lite_nuclides</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#aef01025e80ab7a47a4219802be0c7f6f">TransitionCoeff::burnup()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#a99f9730bd44dab38d3d6307832cbc129">LibraryHeader::day_made()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#aa60ce09301066a3c124dc5aef66eec8b">DecayData::decay_constants</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#a7c55c01e1e736dd4b2205d593be18786">Library::decay_data()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#a91acb9d4be4da86e3d90c43ee40249a1">Library::definition()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#ab6efc9524151303ff4ecc2063be36b4b">TransitionCoeff::fission_xs()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#af4b91a60ef4162a5afb3806b0b69ccc1">DecayData::fissionable_nuclide_ids</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#a76badf2c55b2721af9e905826c952252">TransitionCoeff::flux()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#aea91315957e61126e4a8a38ff842a0d5">TransitionCoeff::flux_size()</a>, <a class="el" href="../../d2/de0/class_origen_1_1_nuclide_set.html#a889dc0300ad2c9cc1f40884d2e61ac25">NuclideSet::ids()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#ad6d0da89c266dbb25f8e755602fc3fc8">TransitionCoeff::loss_xs()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a1a1083188a6a73c54e408d7fe9535a52">DecayData::masses</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#a22734b922eb5ed212fdf902bceb6281c">TransitionCoeff::matrix()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#a010dea823b18fce5a5a0cf409d076cc3">LibraryHeader::month_made()</a>, <a class="el" href="../../d7/ddf/class_origen_1_1_transition_coeff.html#ab9b784678f08e05c95dc0b1bc734f8e5">TransitionCoeff::neutron_yields()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#a30d45658bf2bd71aa3f45267469d959e">LibraryHeader::nuclide_set()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#ad2a4261b52966c5915a5ddac54886d04">TransitionStructure::num_decay_parents()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#a225786b2a1caff0fa84ef412159e3878">TransitionStructure::num_parents()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#a80a17b094e52f4e7a5a11a68e1164b1c">TransitionStructure::parent_positions()</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a20e19690b5a5d8554ffcdd06e2165354">DecayData::q_fractions_from_photons</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#aee092acdc05801ba44688204731f6e60">DecayData::rcg_for_air</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a6f4208700c8580edfddf80045fee35d3">DecayData::rcg_for_water</a>, <a class="el" href="../../db/d2d/class_origen_1_1_decay_data.html#a8af2124dfdc5be17e6159171f5c3318e">DecayData::recoverable_energy_values</a>, <a class="el" href="../../d5/dc1/namespace_origen.html#aec88d7c25f31b8ff4da10eac41a1c593">Origen::setAppVersionWrite()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#a7812fdb3b5bacfd5b545b2d7360aad91">Library::tag_manager()</a>, <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#aa3e4f093a3603ead4ecd75dd187bbd5f">LibraryHeader::title()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#ac77018ddbf19abdfe2e725fa0155dd22">TransitionStructure::total_transitions()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#abc79568ef9d6c9109fb3d497fee01f18">Library::transition_coeff_at()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#af17c1b438527c73c132f6e2d17a6af05">Library::transition_coeff_size()</a>, <a class="el" href="../../d5/d8b/class_origen_1_1_transition_structure.html#a42e46a4906e5f4916a5ad9a675e448ff">TransitionStructure::transition_ids()</a>, <a class="el" href="../../de/d87/class_origen_1_1_library.html#ae02084b4dd43bb4cb770de5db375c12f">Library::transition_structure()</a>, <a class="el" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">Origen::write()</a>, and <a class="el" href="../../d9/d4b/class_origen_1_1_library_header.html#abfc865051a1c6533590613e3177f9249">LibraryHeader::year_made()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// Insist we can write to this stream</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span>( !stream.good() )</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        opts.appendError( <span class="stringliteral">&quot;Failed to open stream for writing.&quot;</span> );</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    nemesis::Timer t;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    t.start();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keyword">const</span> LibraryHeader&amp; header = lib.definition();</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">const</span> TagManager&amp; tag_manager = lib.tag_manager();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">const</span> DecayData&amp; decay_data = lib.decay_data();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keyword">const</span> TransitionStructure&amp; tstruct = lib.transition_structure();</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">size_t</span> ntc = tstruct.total_transitions();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordtype">size_t</span> nne = 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span>( lib.transition_coeff_size() &gt; 0 )</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        nne = lib.transition_coeff_at( 0 ).flux_size();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="keywordtype">size_t</span> nfn = decay_data.fissionable_nuclide_ids.size();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// whether to append</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">bool</span> append = opts.get( <span class="stringliteral">&quot;append&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span>( append )</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        jDebugLine(</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="stringliteral">&quot;LibraryIO_bof is appending data because data already exists&quot;</span> );</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        jDebugLine(</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="stringliteral">&quot;LibraryIO_bof is not appending data because it either doesn&#39;t &quot;</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="stringliteral">&quot;exist or wasn&#39;t asked for&quot;</span> );</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    }</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    bof::BOFWriter writer( stream, append );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span>( !append )</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// set application name and version information</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#aec88d7c25f31b8ff4da10eac41a1c593">setAppVersionWrite</a>( writer, opts, <span class="stringliteral">&quot;ORIGEN_F33&quot;</span> );</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="comment">// add file endianness</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        opts.set( <span class="stringliteral">&quot;wroteFileEndian&quot;</span>,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                  ScaleUtils::IO::EndianUtils::system_is_big_endian()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                      ? <span class="stringliteral">&quot;big&quot;</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                      : <span class="stringliteral">&quot;little&quot;</span> );</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span>( !writer.writeHeader() )</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            opts.appendError( <span class="stringliteral">&quot;Could not write Origen::LibraryIO header.&quot;</span> );</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    bof::BOFObject obj;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="keywordflow">if</span>( !append )</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">// Record #1 itot, ilite, ifp, iact, NON, nmonth, nday, nyear,</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">//    nfluxgrp, nfiso</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// Write record content</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        obj.add( <span class="stringliteral">&quot;ntc&quot;</span>, bof::bof_int( ntc ) );</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        obj.add( <span class="stringliteral">&quot;mon&quot;</span>, bof::bof_int( header.month_made() ) );</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        obj.add( <span class="stringliteral">&quot;day&quot;</span>, bof::bof_int( header.day_made() ) );</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        obj.add( <span class="stringliteral">&quot;yrm&quot;</span>, bof::bof_int( header.year_made() ) );</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        obj.add( <span class="stringliteral">&quot;nne&quot;</span>, bof::bof_int( nne ) );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        obj.add( <span class="stringliteral">&quot;nfn&quot;</span>, bof::bof_int( nfn ) );</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">// Record #2 NTI titles</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        obj.add( <span class="stringliteral">&quot;ttl&quot;</span>, bof::BOFString( header.title() ) );</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="comment">// Record #3 nuclide ids</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;nid&quot;</span>, header.nuclide_set().ids() );</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="comment">// Record #4 Tag Manager</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::Origen::write</a>( obj, <span class="stringliteral">&quot;TagManager&quot;</span>, tag_manager );</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// Record #5 nuclide ids of fissionable nuclides</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;fni&quot;</span>, decay_data.fissionable_nuclide_ids );</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">// Record #6 decay parents</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;nnp&quot;</span>, tstruct.num_decay_parents() );</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="comment">// Record #7 all parents</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;tpn&quot;</span>, tstruct.num_parents() );</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">// Record #8 locations of parents, tstruct of parent pointers</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;ppl&quot;</span>, tstruct.parent_positions() );</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// Record #9 mt list</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;mtl&quot;</span>, tstruct.transition_ids() );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="comment">// Record #10 decay constants</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;dcc&quot;</span>, decay_data.decay_constants );</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment">// Record #11 Q recoverable energy</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;rev&quot;</span>, decay_data.recoverable_energy_values );</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="comment">// Record #12 FG Q fractions due to photons</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;qfp&quot;</span>, decay_data.q_fractions_from_photons );</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="comment">// Record #13 RCG for air</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;rfa&quot;</span>, decay_data.rcg_for_air );</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="comment">// Record #14 RCG for water</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;rfw&quot;</span>, decay_data.rcg_for_water );</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">// Record #15 abundances</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span>( opts.get&lt;<span class="keywordtype">bool</span>&gt;( <span class="stringliteral">&quot;removeAbundance&quot;</span>, <span class="keyword">false</span> ) )</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;aap&quot;</span>, <a class="code" href="../../d7/d09/group___cxx_typedefs.html#gabde6822a61a2a62c6bf8780cb7d42193">Vec_Flt</a>() );</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;aap&quot;</span>, decay_data.abund_of_lite_nuclides );</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="comment">// Record #16 masses</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span>( opts.get&lt;<span class="keywordtype">bool</span>&gt;( <span class="stringliteral">&quot;removeMass&quot;</span>, <span class="keyword">false</span> ) )</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;mas&quot;</span>, <a class="code" href="../../d7/d09/group___cxx_typedefs.html#gabde6822a61a2a62c6bf8780cb7d42193">Vec_Flt</a>() );</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( obj, <span class="stringliteral">&quot;mas&quot;</span>, decay_data.masses );</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        Insist( writer.write( obj ),</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <span class="stringliteral">&quot;***Error: Binary Header failed to write to disk!&quot;</span> );</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// =====================</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// =====BURNUP STEPS====</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// =====================</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> index = 0; index &lt; lib.transition_coeff_size(); index++ )</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keyword">const</span> TransitionCoeff&amp; tcoeff = lib.transition_coeff_at( index );</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        bof::BOFObject bob;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="comment">// #1 burnup</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordtype">float</span> bu = tcoeff.burnup();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">bof::write</a>( bob, <span class="stringliteral">&quot;bu&quot;</span>, bu );</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        Check( bob.containsKey( <span class="stringliteral">&quot;bu&quot;</span> ) );</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="comment">// #2 A tstruct transitions</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( bob, <span class="stringliteral">&quot;ma&quot;</span>, tcoeff.matrix() );</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="comment">// #3 TOCAP capture cross section</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( bob, <span class="stringliteral">&quot;tr&quot;</span>, tcoeff.loss_xs() );</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="comment">// #4 FISS fission cross section</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( bob, <span class="stringliteral">&quot;fx&quot;</span>, tcoeff.fission_xs() );</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="comment">// #5 GENNEU neutron yields</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( bob, <span class="stringliteral">&quot;ny&quot;</span>, tcoeff.neutron_yields() );</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="comment">// #6 FLUX spectrm used to generate the library</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <a class="code" href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">::bof::write</a>( bob, <span class="stringliteral">&quot;fl&quot;</span>, tcoeff.flux() );</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        Insist( writer.write( bob ),</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                <span class="stringliteral">&quot;***Error : Binary burnup failed to be written to disk!&quot;</span> );</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }  <span class="comment">// burnups loop</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    t.stop();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    opts.set( <span class="stringliteral">&quot;saveTime&quot;</span>, 1000 * t.wall_clock() );</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div>
<div class="ttc" id="group___cxx_typedefs_html_gabde6822a61a2a62c6bf8780cb7d42193"><div class="ttname"><a href="../../d7/d09/group___cxx_typedefs.html#gabde6822a61a2a62c6bf8780cb7d42193">Origen::Vec_Flt</a></div><div class="ttdeci">std::vector&lt; float &gt; Vec_Flt</div><div class="ttdef"><b>Definition:</b> Definitions.h:32</div></div>
<div class="ttc" id="namespace_origen_html_adc3bd8008cc072027f3900e34d9f3747"><div class="ttname"><a href="../../d5/dc1/namespace_origen.html#adc3bd8008cc072027f3900e34d9f3747">Origen::write</a></div><div class="ttdeci">void write(bof::BOFObject &amp;obj, std::string name, const TagManager &amp;tag_manager)</div><div class="ttdoc">write a tag manager to a bof object </div><div class="ttdef"><b>Definition:</b> bof.cpp:41</div></div>
<div class="ttc" id="namespace_origen_html_aec88d7c25f31b8ff4da10eac41a1c593"><div class="ttname"><a href="../../d5/dc1/namespace_origen.html#aec88d7c25f31b8ff4da10eac41a1c593">Origen::setAppVersionWrite</a></div><div class="ttdeci">void setAppVersionWrite(bof::BOFWriter &amp;writer, ScaleUtils::IO::DB &amp;opts, const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> io.cpp:632</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Core/io/<a class="el" href="../../de/df1/_library_i_o__bof_8h.html">LibraryIO_bof.h</a></li>
<li>Core/io/<a class="el" href="../../d2/df3/_library_i_o__bof_8cpp.html">LibraryIO_bof.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
